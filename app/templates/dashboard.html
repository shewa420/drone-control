{% extends 'base.html' %}

{% block content %}
<div class="container mt-3" style="max-width: 1100px;">
  <h4 class="text-center mb-3">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥—Ä–æ–Ω–æ–º</h4>

  <div class="d-flex justify-content-between flex-wrap gap-3">
    <div class="card flex-fill text-center" style="min-width: 220px;">
      <div class="card-body py-2">
        <h6 class="card-title">Control</h6>
        <button id="start-stream" class="btn btn-success btn-sm mb-1">Start Stream</button>
        <button id="stop-stream" class="btn btn-danger btn-sm">Stop Stream</button>
      </div>
    </div>

    <div class="card flex-fill text-center" style="min-width: 220px;">
      <div class="card-body py-2">
        <h6 class="card-title">Drone Status</h6>
        <p class="card-text small">Inactive</p>
      </div>
    </div>

    <div class="card flex-fill text-center" style="min-width: 220px;">
      <div class="card-body py-2">
        <h6 class="card-title">Camera</h6>
        <div class="ratio ratio-16x9 rounded overflow-hidden">
          <iframe id="yt-stream"
                  src="https://www.youtube.com/embed/live_stream?channel=–í–ê–®_CHANNEL_ID&autoplay=1"
                  allowfullscreen
                  style="border:0;"></iframe>
        </div>
      </div>
    </div>
  </div>

  <div class="card mt-3">
    <div class="card-header py-2">Telemetry</div>
    <div class="card-body py-2 d-flex justify-content-around text-center">
      <div><div class="small">Altitude</div><strong>-- m</strong></div>
      <div><div class="small">Speed</div><strong>-- km/h</strong></div>
      <div><div class="small">Battery</div><strong>-- %</strong></div>
    </div>
  </div>

  <div class="card mt-3">
    <div class="card-header py-2">WebSocket Status & RC Channels</div>
    <div class="card-body py-2">
      <p class="mb-1 small">–°—Ç–∞—Ç—É—Å: <span id="ws-status" style="color: red;">–í—ñ–¥–∫–ª—é—á–µ–Ω–æ</span></p>
      <p class="mb-2 small" id="status">üéÆ –î–∂–æ–π—Å—Ç–∏–∫ –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ</p>
      <div class="d-flex gap-3 justify-content-center mb-3">
        <div class="text-center">
          <div style="width:80px;height:80px;background:#eee;border-radius:8px;position:relative;">
            <div id="dot-left" style="width:14px;height:14px;background:black;position:absolute;left:33px;top:33px;border-radius:50%;"></div>
          </div>
          <small>Throttle / Yaw</small>
        </div>
        <div class="text-center">
          <div style="width:80px;height:80px;background:#eee;border-radius:8px;position:relative;">
            <div id="dot-right" style="width:14px;height:14px;background:black;position:absolute;left:33px;top:33px;border-radius:50%;"></div>
          </div>
          <small>Roll / Pitch</small>
        </div>
      </div>
      <div class="small">
        <p>CH5: <span id="bar-ch5" class="d-inline-block bg-secondary text-white px-2 rounded" style="min-width:40px;">1000</span></p>
        <p>CH6: <span id="bar-ch6" class="d-inline-block bg-secondary text-white px-2 rounded" style="min-width:40px;">1000</span></p>
        <p>CH7: <span id="bar-ch7" class="d-inline-block bg-secondary text-white px-2 rounded" style="min-width:40px;">1000</span></p>
        <p>CH8: <span id="bar-ch8" class="d-inline-block bg-secondary text-white px-2 rounded" style="min-width:40px;">1000</span></p>
      </div>
    </div>
  </div>
</div>

<script src="{{ url_for('static', path='js/dashboard.js') }}"></script>
{% endblock %}
